<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
    * {
        padding: 0;
        margin: 0;
    }

    .wrap {
        width: 300px;
        margin: 100px auto 0;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
        border: 1px solid #c0c0c0;
        width: 300px;
    }

    th,
    td {
        border: 1px solid #d0d0d0;
        color: #404060;
        padding: 10px;
    }

    th {
        background-color: #09c;
        font: bold 16px "微软雅黑";
        color: #fff;
    }

    td {
        font: 14px "微软雅黑";
    }

    tbody tr {
        background-color: #f0f0f0;
        text-align: center;
    }

    tbody tr:hover {
        cursor: pointer;
        background-color: #fafafa;
    }
    </style>
</head>

<body>
    <div class="wrap">
        <table>
            <thead>
                <tr>
                    <th>
                        <input type="checkbox" id="j_cbAll" />
                    </th>
                    <th>菜名</th>
                    <th>饭店</th>
                </tr>
            </thead>
            <tbody id="j_tb">
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>红烧肉</td>
                    <td>田老师</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>西红柿鸡蛋</td>
                    <td>田老师</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>红烧狮子头</td>
                    <td>田老师</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>日式肥牛</td>
                    <td>田老师</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script src="jquery-1.12.4.js"></script>
    <script>
    $(function() {
      // 思路：
      // 1. 全选的控制下面四个多选框
      //  1.1 获取到全选 #j_cbAll
      //  1.2 #j_cbAll 注册click
      //  1.3 获取到全选的选中状态
      //  1.4 将下面四个多选框的状态同步为全选框的状态

      // 1.
      var $all = $("#j_cbAll");
      // 下面四个多选框
      var $inps = $("#j_tb input");


      // 2.
      $all.click(function(){
        // 3. checked 属性
        var ret = $(this).prop("checked");
        console.log(ret);

        $inps.prop("checked", ret);
      })


      // 2. 下面的四个多选框控制全选
      //  2.1 获取到下面的多选框
      //  2.2 下面的多选框注册click
      //  2.3 判断选中的个数 -- 需要获取选中的个数
      //    1. 如果四个都被选中了，全选框被选中
      //    2. 只要有一个没有被选中，全选就不会被选中
      $inps.click(function(){
        // :checked ==> 从获取到属性中，过滤出被选中的
        // console.log($("#j_tb input:checked").length);

        // 被选中的个数
        var len = $("#j_tb input:checked").length;

        // if(len === $inps.length){ // true, 
        //   $all.prop("checked", true);
        // }else{ // false
        //   $all.prop("checked", false);
        // }

        // 三元的还是不够优化
        // len === $inps.length ? $all.prop("checked", true) : $all.prop("checked", false)


        // 优化
        $all.prop("checked", len === $inps.length);
      })

    });
    </script>
</body>

</html>
