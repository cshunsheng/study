<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="UTF-8">
  <title></title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    .wrap {
      width: 300px;
      margin: 100px auto 0;
    }

    table {
      border-collapse: collapse;
      border-spacing: 0;
      border: 1px solid #c0c0c0;
      width: 300px;
    }

    th,
    td {
      border: 1px solid #d0d0d0;
      color: #404060;
      padding: 10px;
    }

    th {
      background-color: #09c;
      font: bold 16px "微软雅黑";
      color: #fff;
    }

    td {
      font: 14px "微软雅黑";
    }

    tbody tr {
      background-color: #f0f0f0;
      text-align: center;
    }

    tbody tr:hover {
      cursor: pointer;
      background-color: #fafafa;
    }
  </style>
</head>

<body>
<button id= "btn">点击按钮</button>
<div class="wrap">
  <table>
    <thead>
    <tr>
      <th>
        <input type="checkbox" id="j_cbAll" />
      </th>
      <th>菜名</th>
      <th>饭店</th>
    </tr>
    </thead>
    <tbody id="j_tb">
    <tr>
      <td>
        <input type="checkbox" />
      </td>
      <td>红烧肉</td>
      <td>田老师</td>
    </tr>
    <tr>
      <td>
        <input type="checkbox" />
      </td>
      <td>西红柿鸡蛋</td>
      <td>田老师</td>
    </tr>
    <tr>
      <td>
        <input type="checkbox" />
      </td>
      <td>红烧狮子头</td>
      <td>田老师</td>
    </tr>
    <tr>
      <td>
        <input type="checkbox" />
      </td>
      <td>日式肥牛</td>
      <td>田老师</td>
    </tr>
    </tbody>
  </table>
</div>

<script src="jquery-1.12.4.js"></script>
<script>
  $(function(){
    //获取头部的input
    //给input注册点击事件
    //tbody下的input也被选中
    $j_cbAll = $("#j_cbAll");
    $inputs = $("#j_tb input");
    $btn = $("#btn")
    $j_cbAll.on('click',function(){

      // if($j_cbAll.prop('checked')==true){
      //  $inputs.prop("checked",true)
      // }
      // else{
      //  $inputs.prop("checked",false)
      // }
      $inputs.prop("checked",$j_cbAll.prop("checked"))
    })
    //获取tbody处的input，给input注册点击事件，当选中的个数为inputs.length时，thead处的input被选中；
    $inputs.on('click',function(){
      //      if($("#j_tb input:checked").length==$inputs.length){
      //           $j_cbAll.prop("checked",true)
      //      }
      //      else{
      //          $j_cbAll.prop("checked",false)
      //      }
      // })

      $j_cbAll.prop("checked",($("#j_tb input:checked").length==$inputs.length))
    })
    //给btn注册点击事件
    //thead和tbody下的input取相反状态
//    $btn.on("click",function(){
//      for(var i=0;i<$inputs.length;i++){
//        if($inputs.eq(i).prop("checked")&&$("#j_tb input:checked").length!=$inputs.length){
//          $inputs.eq(i).prop("checked",false)
//          $j_cbAll.prop("checked",false)
//        }
//        else{
//          $inputs.eq(i).prop("checked",true)
//          $j_cbAll.prop("checked",true)
//
//        }
//      }
//    })

    $("#j_tb input").on('click',function (){

      var $checkedALL = $("#j_tb input").length;
      var $checkedLength = $("#j_tb input:checked").length;
      if($checkedALL===$checkedLength){
        $j_cbAll.prop("checked",true);
      }
    });








  })
</script>
</body>

</html>
